<html lang="ja">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="mobile-web-app-capable" content="yes">
<link rel="apple-touch-icon-precomposed" href="icon.png">
<title>テスト</title>
<script type="text/javascript">
if ('serviceWorker' in navigator) {
  navigator.serviceWorker.register('/sw.js').then(function(registration) {
    // 登録成功
    console.log('ServiceWorker registration successful with scope: ', registration.scope);
  }).catch(function(err) {
    // 登録失敗 :(
    console.log('ServiceWorker registration failed: ', err);
  });
}
  
var saveButton = document.getElementById('save_button');
var deferredPrompt;

window.addEventListener('beforeinstallprompt', function(e) {
    console.log('インストールバナーの表示をキャンセルします');
    e.preventDefault();
    saveButton.removeAttribute('disabled');
    deferredPrompt = e;
  });

saveButton.addEventListener('click', function() {
    if (deferredPrompt !== undefined) {
      deferredPrompt.prompt();
      deferredPrompt.userChoice.then(function(result) {
        if (result.outcome == 'dismissed') {
          console.log('キャンセルされました');
        } else {
          console.log('インストールされました');
        }
        deferredPrompt = null;
        saveButton.addAttribute('disabled');
      });
    }
  });
</script>
</head>
<body>
Hello world!
</body>
</html>
